(function(t,r){typeof exports=="object"&&typeof module!="undefined"?r(exports):typeof define=="function"&&define.amd?define(["exports"],r):(t=typeof globalThis!="undefined"?globalThis:t||self,r(t["@korylee/utils"]={}))})(this,function(t){"use strict";function r(e,{errorExt:n={},initialValue:i=void 0}={}){return e.then(s=>[null,s]).catch(s=>(n&&Object.assign(s,n),[s,i]))}const U=Object.prototype.toString,c=(e,n)=>U.call(e)===`[object ${n}]`,I=e=>typeof e!="undefined",k=e=>!I(e),M=e=>c(e,"String"),A=e=>e!==null&&c(e,"Object"),p=e=>typeof e=="function",T=e=>c(e,"Date"),m=e=>e===null,y=e=>e===void 0,P=e=>y(e)||m(e),_=e=>c(e,"Number"),R=e=>c(e,"Promise")&&A(e)&&p(e.then)&&p(e.catch),z=e=>c(e,"Boolean"),B=e=>c(e,"RegExp"),C=e=>e&&Array.isArray(e),F=e=>/(((^https?:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%\/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[\w]*))?)$/.test(e);class E{constructor(n,i=new Map){this.$cache=i,this.$capacity=n}get(n){const i=this.$cache.get(n);if(i)return this.$cache.delete(n),this.$cache.set(n,i),i}put(n,i){this.$cache.has(n)?this.$cache.delete(n):this.$cache.size>=this.$capacity&&this.$cache.delete(this.$cache.keys().next().value),this.$cache.set(n,i)}}const D=Symbol("skip");function L(e,n,i){const s=[];for(let a=0;a<e.length;a++){const f=e[a],u=n.call(i,f,a,e);u!==D&&s.push(u)}return s}const N=Symbol("skip");async function Z(e,n,{concurrency:i=Number.POSITIVE_INFINITY,stopOnError:s=!0}={}){return new Promise((a,f)=>{const u=[],g=[],w=[],Y=e[Symbol.iterator]();let $=!1,j=!1,h=0,O=0;const b=()=>{if($)return;const l=Y.next(),S=O;if(O++,l.done){if(j=!0,h===0)if(s&&g.length>0)f(g);else{w.sort((o,d)=>d-o);for(const o of w)u.splice(o,1);a(u)}return}h++,(async()=>{try{const o=await l.value;if($)return;const d=await n(o,S,e);d===N?w.push(S):u[S]=d,h--,b()}catch(o){s?($=!0,f(o)):(g.push(o),h--,b())}})()};for(let l=0;l<i&&(b(),!j);l++);})}function V(e){return m(e)||y(e)?[]:Array.isArray(e)?e:[e]}t.LruCache=E,t.awaitTo=r,t.is=c,t.isArray=C,t.isBoolean=z,t.isDate=T,t.isDef=I,t.isFunction=p,t.isNull=m,t.isNullOrUnDef=P,t.isNumber=_,t.isObject=A,t.isPromise=R,t.isRegExp=B,t.isString=M,t.isUnDef=k,t.isUndefined=y,t.isUrl=F,t.map=L,t.mapSkip=D,t.pMap=Z,t.pMapSkip=N,t.wrapInArray=V,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
